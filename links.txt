http://pragdave.pragprog.com/pragdave/2005/11/symbolto_proc.html